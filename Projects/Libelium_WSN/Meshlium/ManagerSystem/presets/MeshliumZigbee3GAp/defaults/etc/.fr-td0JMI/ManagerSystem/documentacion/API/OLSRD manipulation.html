<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
<title>OLSRD manipulation</title>
</head><body>
<h1>OLSRD manipulation</h1>
<div class="cleaner"></div> <div class=" margin-onda_msystem">     <div style="background: #ededed; width: 90px; padding-right: 5px;"class="fright borde_simple borde_redondo_5">         <br>         <a  href="http://www.libelium.com/development/meshlium/msystem-index" class="fright" >             Back to top         </a>         <div class="engranaje_devel fright"></div>         <div class="cleaner"></div>         <br>     </div> </div> <div class="cleaner"></div> <div class="ondaSupp margin-onda_msystem2"></div> <h2 class="font_red grande">parse_olsrd ( $filepath )</h2>
<p>
This function parses olsrd configuration file. A path to the
configuration file should be passed in the $filepath variable.<br>
The function return an array containing all the configuration
parameters parsed.
</p>
<p>
File location: API/parser_olsrd.php
</p>
<p>
Example of use:<br />
<code><pre class="devel">
    parse_olsrd('/etc/olsrd/olsrd.conf');
</pre><br></code>
</p>
<div class="cleaner"></div> <div class=" margin-onda_msystem">     <div style="background: #ededed; width: 90px; padding-right: 5px;"class="fright borde_simple borde_redondo_5">         <br>         <a  href="http://www.libelium.com/development/meshlium/msystem-index" class="fright" >             Back to top         </a>         <div class="engranaje_devel fright"></div>         <div class="cleaner"></div>         <br>     </div> </div> <div class="cleaner"></div> <div class="ondaSupp margin-onda_msystem2"></div> <h2 class="font_red grande">parse_olsrd_txt_info ($path)</h2>
<p>
This function parses olsrd text info provided by the plugin
olsrd_txtinfo.so.0.1 A path to the file generated by the olsrd daemon
should be passed in the $filepath variable.<br>
The function return an array containing all the brothers ip parsed, the
number of brothers, the topology and the number of the number of
topology subarrays.
</p>
<p>
File location: API/parser_olsrd_txt_info.php
</p>
<p>
Example of use:<br />
<code><pre class="devel">
    &lt;?php
        echo print_r(parse_olsrd_txt_info('olsrd.txt'),true);
    ?&gt;
</pre><br></code>
<p>
    This is an example of the output
</p>
<code><pre class="devel">
Array
(
    [brothers] => Array
        (
            [0] => 192.168.1.250
            [1] => 192.168.1.14
            [2] => 192.168.1.110
            [3] => 192.168.1.251
        )
    [num_brothers] => 4
    [num_top] => 2
    [top] => Array
        (
            [0] => Array
                (
                    [1] => 192.168.1.250
                    [2] => 192.168.1.14
                )
            [1] => Array
                (
                    [1] => 192.168.1.14
                    [2] => 192.168.1.250
                )
        )
)
</pre><br></code>
<div class="cleaner"></div> <div class=" margin-onda_msystem">     <div style="background: #ededed; width: 90px; padding-right: 5px;"class="fright borde_simple borde_redondo_5">         <br>         <a  href="http://www.libelium.com/development/meshlium/msystem-index" class="fright" >             Back to top         </a>         <div class="engranaje_devel fright"></div>         <div class="cleaner"></div>         <br>     </div> </div> <div class="cleaner"></div> <div class="ondaSupp margin-onda_msystem2"></div> <h2 class="font_red grande">save_olsrd($post,$write_path='',$read_path='')</h2>
<p>
This function will save data stored in $post (usually a html form) on
the file declared on $write_path, aditionally a path to a olsd file can
be provided with $read_path. If $write_path is empty or not declared
$base_plugin.'data/new_olsd.conf' will be used as defalult value, if
$read_path is empty or not declared /etc/olsrd/olsrd.conf will be used.<br>
The function will call parse_olsr($read_path) and data provided by
parse_olsr will be updated with data in $post and saved to $write_path.<br>
This allows to have a subset of configure options avaible for users on
an html form and a default skeleton. Skeleton will be completed with
form values and write a new olrsd configuration file declared on
$write_path.<br>
The function has no return value.
</p>
<p>
File location: API/save_olsrd.php
</p>
<p>
Example of use:
<code><pre class="devel">
    $post_data=jsondecode($_POST['form_fields']);
    save_olsrd($post_data,$base_plugin.'data/saved_data',$base_plugin.'data/read_data');
</pre><br></code>
</p>
</body></html>