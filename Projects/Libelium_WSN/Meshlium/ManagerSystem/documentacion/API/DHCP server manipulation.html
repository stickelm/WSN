<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>DHCP server manipulation</title></head><body>
<h1>DHCP server manipulation</h1>

<div class="cleaner"></div> <div class=" margin-onda_msystem">     <div style="background: #ededed; width: 90px; padding-right: 5px;"class="fright borde_simple borde_redondo_5">         <br>         <a  href="http://www.libelium.com/development/meshlium/msystem-index" class="fright" >             Back to top         </a>         <div class="engranaje_devel fright"></div>         <div class="cleaner"></div>         <br>     </div> </div> <div class="cleaner"></div> <div class="ondaSupp margin-onda_msystem2"></div> <h2 class="font_red grande">parse_dhcp_server()</h2>
<p>
This function parses dnsmasq configuration file and stores the configuration on an array.<br>
The function will return an array with the dnsmasq configuration.
</p>
<p>
File location: API/parser_dhcp_server_new.php
</p>
<p>
Example of use:<br />
<code>
    $entries=parse_dhcp_server('ath0');<br />
    if(isset($entries['ath0'])<br />
    {<br />
        echo "dhcp over ath0 is setted.";<br />
    }<br />
</code>
</p>
<div class="cleaner"></div> <div class=" margin-onda_msystem">     <div style="background: #ededed; width: 90px; padding-right: 5px;"class="fright borde_simple borde_redondo_5">         <br>         <a  href="http://www.libelium.com/development/meshlium/msystem-index" class="fright" >             Back to top         </a>         <div class="engranaje_devel fright"></div>         <div class="cleaner"></div>         <br>     </div> </div> <div class="cleaner"></div> <div class="ondaSupp margin-onda_msystem2"></div> <h2 class="font_red grande">update_dhcp($dhcp_configuration)</h2>
<p>

This function checks $dhcp_configuration array (usually provided by a
html form) and stores data on an array that can be used with
save_dhcp_server function.<br>
The function will return an array with the dnsmasq configuration that can be understood by save_dhcp_server().<br>
This is the fields that can be defined on $dhcp_configuration:<br>
<ul class="devel">
  <li>&nbsp;dhcp_server_XXXX: Usually used interfaces are eth0, ath0 or
ath1 but future supported interfaces can be added for DHCP server. If
this field contains string 'on', the funtion will process the interface
dhcp configuration fields.<br>
  </li>
  <li>dhcp_start_XXXX:&nbsp;
This field must contain a valid IP Address. This address will be the
first value used by dhcp server for new dhcp request.</li>
  <li>dhcp_end_XXXX: This field must contain a valid IP Address. This
will be the last avaible address that dhcp server can assign to dhcp
requests.<br>
  </li>
  <li>dhcp_expire_XXXX: This field must be a number. This is the number of hours that the dhcp lease will stand for.<br>
  </li>
</ul>
</p>
<p>
File location: API/save_dhcp_server_new.php
</p>
<p>
Example of use:<br>
<code>
$dhcp_configuration=update_dhcp($form_fields);<br />
save_dhcp_server($dhcp_configuration);<br />
</code>
</p>
<div class="cleaner"></div> <div class=" margin-onda_msystem">     <div style="background: #ededed; width: 90px; padding-right: 5px;"class="fright borde_simple borde_redondo_5">         <br>         <a  href="http://www.libelium.com/development/meshlium/msystem-index" class="fright" >             Back to top         </a>         <div class="engranaje_devel fright"></div>         <div class="cleaner"></div>         <br>     </div> </div> <div class="cleaner"></div> <div class="ondaSupp margin-onda_msystem2"></div> <h2 class="font_red grande">save_dhcp_server($dhcp_configuration,$save_file='')</h2>
<p>
This function saves a dnsmasq configuration file with the values stored
on $dhcp_configuration. A path for the file to write can be passed
within $save_file variable. If no $save_file variable is passed or is
empty $base_plugin.'data/dnsmasq.more.conf' will be used as default.<br>
The function will return an array with the dnsmasq configuration.
</p>
<p>
File location: API/save_dhcp_server_new.php
</p>
<p>
Example of use:<br />
<code>
$dhcp_configuration=jsondecode($_POST['form_fields']);<br />
save_dhcp_server($dhcp_configuration);<br />
</code>
</p>
</body></html>